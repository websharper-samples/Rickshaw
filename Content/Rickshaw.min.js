function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF;a=self;b=a.Rickshaw=a.Rickshaw||{};c=b.Client=b.Client||{};d=a.StartupCode$Rickshaw$Client=a.StartupCode$Rickshaw$Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Operators=e.Operators||{};g=a.Object;h=e.Obj=e.Obj||{};i=e.UI=e.UI||{};j=i.HtmlModule=i.HtmlModule||{};k=j.attr=j.attr||{};l=e.JavaScript=e.JavaScript||{};m=l.JS=l.JS||{};n=e.Arrays=e.Arrays||{};o=a.EventTarget;p=i.Doc=i.Doc||{};q=i.AttrProxy=i.AttrProxy||{};r=i.Client=i.Client||{};s=r.Templates=r.Templates||{};t=l.Pervasives=l.Pervasives||{};u=i.DomUtility=i.DomUtility||{};v=i.Attrs=i.Attrs||{};w=a.Node;x=e.Collections=e.Collections||{};y=x.Dictionary=x.Dictionary||{};z=e.Unchecked=e.Unchecked||{};A=i.View=i.View||{};B=i.Elt=i.Elt||{};C=i.Array=i.Array||{};D=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};E=x.HashSet=x.HashSet||{};F=e.Seq=e.Seq||{};G=a.WindowOrWorkerGlobalScope;H=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};I=i.Docs=i.Docs||{};J=i.DocElemNode=i.DocElemNode||{};K=a.CharacterData;L=i.Updates=i.Updates||{};M=e.List=e.List||{};N=M.T=M.T||{};O=x.DictionaryUtil=x.DictionaryUtil||{};P=s.Prepare=s.Prepare||{};Q=e.Slice=e.Slice||{};R=e.Enumerator=e.Enumerator||{};S=x.KeyCollection=x.KeyCollection||{};T=i.An=i.An||{};U=r.Settings=r.Settings||{};V=i.Abbrev=i.Abbrev||{};W=V.Mailbox=V.Mailbox||{};X=r.Attrs=r.Attrs||{};Y=X.Dyn=X.Dyn||{};Z=V.Fresh=V.Fresh||{};_0=i.Snap=i.Snap||{};_1=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};_2=e.Strings=e.Strings||{};_3=r.Docs=r.Docs||{};_4=_3.RunState=_3.RunState||{};_5=_3.NodeSet=_3.NodeSet||{};_6=i.Anims=i.Anims||{};_7=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};_8=R.T=R.T||{};_9=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};_=e.Concurrency=e.Concurrency||{};$=i.AppendList=i.AppendList||{};ba=x.HashSetUtil=x.HashSetUtil||{};bb=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bc=i.Easing=i.Easing||{};bd=_.AsyncBody=_.AsyncBody||{};be=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bf=_.CT=_.CT||{};bg=V.HashSet=V.HashSet||{};bh=_.Scheduler=_.Scheduler||{};bi=e.CancellationTokenSource=e.CancellationTokenSource||{};bj=_3.DomNodes=_3.DomNodes||{};bk=e.Queue=e.Queue||{};bl=a.Error;bm=e.OperationCanceledException=e.OperationCanceledException||{};bn=e.Lazy=e.Lazy||{};bo=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bp=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};bq=bp.LazyRecord=bp.LazyRecord||{};br=a.Math;bs=b&&b.Fixtures;bt=b&&b.Color;bu=b&&b.Graph;bv=bu&&bu.RangeSlider;bw=bu&&bu.Behavior;bx=bw&&bw.Series;by=bu&&bu.Axis;bz=bs&&bs.Time;bA=bs&&bs.Number;bB=a.IntelliFactory;bC=bB&&bB.Runtime;bD=a.console;bE=a.jQuery;bF=a.Date;c.Main=function(){d.$cctor();return d.Main;};d.$cctor=function(){var bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ca,cb,cc,cd,ce,cf;d.$cctor=a.ignore;function b_(cg){if(b5.length>0&&(cg||br.random()>=0.95)){bZ.add(n.get(n.get(ca,2),n.get(ca,2).length-1).x,b5.shift());bZ.update();}}function b$(){a.setInterval(function(){b_(false);},6000);}ca=[];for(cb=1,cc=9;cb<=cc;cb++)ca.push([]);cd=new bs.RandomData(150);for(ce=1,cf=70;ce<=cf;ce++)cd.addData(ca);bI=(bJ=new bt.Palette({scheme:"classic9"}),(bK=p.Element("div",[q.Create("id","diagram")],[]),(bL=[(bM={data:n.get(ca,0)},bM.color=bJ.color(),bM.name="Moscow",bM),(bN={data:n.get(ca,1)},bN.color=bJ.color(),bN.name="Shanghai",bN),(bO={data:n.get(ca,2)},bO.color=bJ.color(),bO.name="Amsterdam",bO),(bP={data:n.get(ca,3)},bP.color=bJ.color(),bP.name="Paris",bP),(bQ={data:n.get(ca,4)},bQ.color=bJ.color(),bQ.name="Tokyo",bQ),(bR={data:n.get(ca,5)},bR.color=bJ.color(),bR.name="London",bR),(bS={data:n.get(ca,6)},bS.color=bJ.color(),bS.name="New York",bS)],(bT=new b.Graph((bU={element:bK.elt,series:bL},bU.width=900,bU.height=500,bU.renderer="area",bU.stroke=true,bU.preserve=true,bU)),(bT.render(),bV=p.Element("div",[q.Create("id","preview")],[]),bW=new bv.Preview({element:bV.elt,graph:bT}),new bu.HoverDetail((bX={graph:bT},bX.xFormatter=function(cg){return(new a.Date(cg*1000)).toDateString();},bX)),bY=p.Element("div",[q.Create("id","timeline")],[]),bZ=new bu.Annotate({graph:bT,element:bY.elt}),b0=p.Element("div",[q.Create("id","legend")],[]),b1=new bu.Legend({graph:bT,element:b0.elt}),new bx.Toggle({graph:bT,legend:b1}),new bx.Order({graph:bT,legend:b1}),new bx.Highlight({graph:bT,legend:b1}),b2=p.Element("div",[q.Create("id","smoother")],[]),new bu.Smoother({graph:bT,element:b2.elt}),(new by.Time((b3={graph:bT},b3.ticksTreatment="glow",b3.timeFixture=new bz.Local(),b3))).render(),(new by.Y((b4={graph:bT},b4.ticksTreatment="glow",b4.ticksFormat=function(cg){return bA.formatKMBT(cg);},b4))).render(),b5=["Changed home page welcome message","Minified JS and CSS","Changed button color from blue to green","Refactored SQL query to use indexed columns","Added additional logging for debugging","Fixed typo","Rewrite conditional logic for clarity","Added documentation for new methods"],a.setInterval(function(){cd.removeData(ca);cd.addData(ca);bT.update();},3000),b_(true),(new by.Time((b6={graph:n.get(bW.previews,0)},b6.ticksTreatment="glow",b6.timeFixture=new bz.Local(),b6))).render(),b7=p.Element("div",[q.Create("id","side-panel"),q.Create("style","float: left")],[b0,b2]),b8=p.Element("div",[q.Create("style","float: left; margin: 10px")],[bK,bY,bV]),b9=p.Element("div",[q.Create("id","content"),q.Create("style","float: left")],[]),b9.elt.appendChild(b8.elt),b9.elt.appendChild(b7.elt),s.LoadLocalTemplates(""),p.RunById("main",b9))))));d.Main=bI;};f.FailWith=function(bG){throw new bl(bG);};f.KeyValue=function(bG){return[bG.K,bG.V];};h=e.Obj=bC.Class({Equals:function(bG){return this===bG;},GetHashCode:function(){return -1;}},null,h);h.New=bC.Ctor(function(){},h);k=j.attr=bC.Class({},h,k);m.GetFieldValues=function(bG){var bH,bI;bH=[];for(var bJ in bG)bH.push(bG[bJ]);return bH;};n.ofList=function(bG){var bH,bI;bI=[];bH=bG;while(!(bH.$==0)){bI.push(M.head(bH));bH=M.tail(bH);}return bI;};n.exists=function(bG,bH){var bI,bJ,bK,bL;bI=false;bJ=0;bL=n.length(bH);while(!bI&&bJ<bL)if(bG(bH[bJ]))bI=true;else bJ=bJ+1;return bI;};n.tryPick=function(bG,bH){var bI,bJ,bK;bI=null;bJ=0;while(bJ<bH.length&&bI==null){bK=bG(bH[bJ]);bK!=null&&bK.$==1?bI=bK:void 0;bJ=bJ+1;}return bI;};n.tryFindIndex=function(bG,bH){var bI,bJ;bI=null;bJ=0;while(bJ<bH.length&&bI==null){bG(bH[bJ])?bI={$:1,$0:bJ}:void 0;bJ=bJ+1;}return bI;};n.filter=function(bG,bH){var bI,bJ,bK;bI=[];for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)if(bG(bH[bJ]))bI.push(bH[bJ]);return bI;};n.map=function(bG,bH){var bI,bJ,bK;bI=new a.Array(bH.length);for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++)bI[bJ]=bG(bH[bJ]);return bI;};n.iter=function(bG,bH){var bI,bJ;for(bI=0,bJ=bH.length-1;bI<=bJ;bI++)bG(bH[bI]);};n.foldBack=function(bG,bH,bI){var bJ,bK,bL,bM,bN;bJ=bI;bL=bH.length;for(bM=1,bN=bL;bM<=bN;bM++)bJ=bG(bH[bL-bM],bJ);return bJ;};n.pick=function(bG,bH){var bI;bI=n.tryPick(bG,bH);return bI==null?f.FailWith("KeyNotFoundException"):bI.$0;};n.concat=function(bG){return a.Array.prototype.concat.apply([],n.ofSeq(bG));};n.ofSeq=function(bG){var bH,bI;if(bG instanceof a.Array)return bG.slice();else if(bG instanceof N)return n.ofList(bG);else{bH=[];bI=R.Get(bG);try{while(bI.MoveNext())bH.push(bI.Current());return bH;}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}}};n.choose=function(bG,bH){var bI,bJ,bK,bL;bI=[];for(bJ=0,bK=bH.length-1;bJ<=bK;bJ++){bL=bG(bH[bJ]);bL==null?void 0:bI.push(bL.$0);}return bI;};n.create=function(bG,bH){var bI,bJ,bK;bI=new a.Array(bG);for(bJ=0,bK=bG-1;bJ<=bK;bJ++)bI[bJ]=bH;return bI;};n.init=function(bG,bH){var bI,bJ,bK;bG<0?f.FailWith("Negative size given."):null;bI=new a.Array(bG);for(bJ=0,bK=bG-1;bJ<=bK;bJ++)bI[bJ]=bH(bJ);return bI;};n.forall=function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=n.length(bH);while(bI&&bJ<bL)if(bG(bH[bJ]))bJ=bJ+1;else bI=false;return bI;};n.get=function(bG,bH){n.checkBounds(bG,bH);return bG[bH];};n.checkBounds=function(bG,bH){if(bH<0||bH>=bG.length)f.FailWith("Index was outside the bounds of the array.");};n.length=function(bG){return bG.dims===2?bG.length*bG.length:bG.length;};n.set=function(bG,bH,bI){n.checkBounds(bG,bH);bG[bH]=bI;};p=i.Doc=bC.Class({},h,p);p.Element=function(bG,bH,bI){var bJ,bK;bJ=q.Concat(bH);bK=p.Concat(bI);return B.New(u.CreateElement(bG),bJ,bK);};p.RunById=function(bG,bH){var bI;bI=u.Doc().getElementById(bG);z.Equals(bI,null)?f.FailWith("invalid id: "+bG):p.Run(bI,bH);};p.Concat=function(bG){var bH;bH=C.ofSeqNonCopying(bG);return C.TreeReduce(p.get_Empty(),p.Append,bH);};p.Run=function(bG,bH){I.LinkElement(bG,bH.docNode);p.RunInPlace(false,bG,bH);};p.Append=function(bG,bH){return p.Mk({$:0,$0:bG.docNode,$1:bH.docNode},A.Map2Unit(bG.updates,bH.updates));};p.get_Empty=function(){return p.Mk(null,A.Const());};p.RunInPlace=function(bG,bH,bI){var bJ;bJ=I.CreateRunState(bH,bI.docNode);A.Sink(T.get_UseAnimations()||U.BatchUpdatesEnabled()?W.StartProcessor(I.PerformAnimatedUpdate(bG,bJ,bI.docNode)):function(){I.PerformSyncUpdate(bG,bJ,bI.docNode);},bI.updates);};p.Mk=function(bG,bH){return new p.New(bG,bH);};p.New=bC.Ctor(function(bG,bH){h.New.call(this);this.docNode=bG;this.updates=bH;},p);q=i.AttrProxy=bC.Class({},null,q);q.Create=function(bG,bH){return v.Static(function(bI){u.SetAttr(bI,bG,bH);});};q.Concat=function(bG){var bH;bH=C.ofSeqNonCopying(bG);return C.TreeReduce(v.EmptyAttr(),q.Append,bH);};q.Append=function(bG,bH){return v.AppendTree(bG,bH);};s.LoadLocalTemplates=function(bG){!s.LocalTemplatesLoaded()?(s.set_LocalTemplatesLoaded(true),s.LoadNestedTemplates(self.document.body,"")):void 0;s.LoadedTemplates().set_Item(bG,s.LoadedTemplateFile(""));};s.LocalTemplatesLoaded=function(){D.$cctor();return D.LocalTemplatesLoaded;};s.set_LocalTemplatesLoaded=function(bG){D.$cctor();D.LocalTemplatesLoaded=bG;};s.LoadNestedTemplates=function(bG,bH){var bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;function bI(bX){var bY,bZ;if(!bJ.ContainsKey(bX)){bY=(bZ=null,[bK.TryGetValue(bX,{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);bY[0]?(bW.Add(bX),bK.Remove(bX),s.PrepareTemplateStrict(bH,{$:1,$0:bX},bY[1][0],{$:1,$0:bY[1][1]},{$:1,$0:bI})):bD.warn(bW.Contains(bX)?"Encountered loop when instantiating "+bX:"Local template does not exist: "+bX);}}bJ=s.LoadedTemplateFile(bH);bK=new y.New$5();bL=bG.querySelectorAll("[ws-template]");for(bM=0,bN=bL.length-1;bM<=bN;bM++){bO=bL[bM];bP=bO.getAttribute("ws-template").toLowerCase();bO.removeAttribute("ws-template");bK.set_Item(bP,[[bO],s.FakeRootSingle(bO)]);}bQ=bG.querySelectorAll("[ws-children-template]");for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];bU=bT.getAttribute("ws-children-template").toLowerCase();bT.removeAttribute("ws-children-template");bK.set_Item(bU,(bV=u.ChildrenArray(bT),[bV,s.FakeRoot(bV)]));}bW=new E.New$3();while(bK.count>0)bI(F.head(bK.get_Keys()));};s.LoadedTemplates=function(){D.$cctor();return D.LoadedTemplates;};s.LoadedTemplateFile=function(bG){var bH,bI,bJ;bH=(bI=null,[s.LoadedTemplates().TryGetValue(bG,{get:function(){return bI;},set:function(bK){bI=bK;}}),bI]);return bH[0]?bH[1]:(bJ=new y.New$5(),(s.LoadedTemplates().set_Item(bG,bJ),bJ));};s.FakeRootSingle=function(bG){var bH,bI,bJ;bG.removeAttribute("ws-template");bH=bG.getAttribute("ws-replace");bH===null?void 0:(bG.removeAttribute("ws-replace"),bI=bG.parentNode,z.Equals(bI,null)?void 0:(bJ=self.document.createElement(bG.tagName),bJ.setAttribute("ws-replace",bH),bI.replaceChild(bJ,bG)));return s.FakeRoot([bG]);};s.FakeRoot=function(bG){var bH,bI,bJ;bH=self.document.createElement("div");for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH.appendChild(n.get(bG,bI));return bH;};s.PrepareTemplateStrict=function(bG,bH,bI,bJ,bK){var bL,bM;function bN(bS,bT){var bU,bV,bW,bX,bY,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci;function bZ(cj){}while(true)switch(bS){case 0:if(bT!==null){bU=bT.nextSibling;if(z.Equals(bT.nodeType,w.TEXT_NODE))P.convertTextNode(bT);else if(z.Equals(bT.nodeType,w.ELEMENT_NODE))bP(bT);bT=bU;}else return null;break;case 1:b0=Q.string(bT.nodeName,{$:1,$0:3},null).toLowerCase();b1=(bV=b0.indexOf("."),bV===-1?[bG,b0]:[Q.string(b0,null,{$:1,$0:bV-1}),Q.string(b0,{$:1,$0:bV+1},null)]);b2=b1[1];b3=b1[0];if(b3!==""&&!s.LoadedTemplates().ContainsKey(b3))return P.failNotLoaded(b2);else{if(b3===""&&bK!=null)bK.$0(b2);b4=s.LoadedTemplates().get_Item(b3);if(!b4.ContainsKey(b2))return P.failNotLoaded(b2);else{b5=b4.get_Item(b2);b6=b5.cloneNode(true);b7=new E.New$3();b8=new y.New$5();b9=bT.attributes;for(b_=0,b$=b9.length-1;b_<=b$;b_++){ca=b9.item(b_).name.toLowerCase();b8.set_Item(ca,(cb=b9.item(b_).nodeValue,cb===""?ca:cb.toLowerCase()));!b7.Add(ca)?bD.warn("Hole mapped twice",ca):void 0;}for(cc=0,cd=bT.childNodes.length-1;cc<=cd;cc++){ce=bT.childNodes[cc];z.Equals(ce.nodeType,w.ELEMENT_NODE)?!b7.Add(ce.nodeName.toLowerCase())?bD.warn("Hole filled twice",b2):void 0:void 0;}cf=bT.childNodes.length===1&&z.Equals(bT.firstChild.nodeType,w.TEXT_NODE);if(cf){bX=P.fillTextHole(b6,bT.firstChild.textContent,b2);((function(cj){return function(ck){if(ck!=null)cj(ck.$0);};}((bY=function(cj){return function(ck){return cj.Add(ck);};}(b7),function(cj){return bZ(bY(cj));})))(bX));}P.removeHolesExcept(b6,b7);if(!cf){for(cg=0,ch=bT.childNodes.length-1;cg<=ch;cg++){ci=bT.childNodes[cg];z.Equals(ci.nodeType,w.ELEMENT_NODE)?ci.hasAttributes()?P.fillInstanceAttrs(b6,ci):bO(b6,ci):void 0;}}P.mapHoles(b6,b8);P.fill(b6,bT.parentNode,bT);bT.parentNode.removeChild(bT);return;}}break;}}function bO(bS,bT){var bU,bW,bX;function bV(bY,bZ){var b0,b1,b2;if(bW==="title"&&bT.hasChildNodes()){b0=bE.parseHTML(bT.textContent);bT.removeChild(bT.firstChild);for(b1=0,b2=b0.length-1;b1<=b2;b1++)bT.appendChild(n.get(b0,b1));}else null;bP(bT);return P.fill(bT,bY,bZ);}bW=bT.nodeName.toLowerCase();u.IterSelector(bS,"[ws-attr-holes]",function(bY){var bZ,b0,b1,b2,b3;bZ=_2.SplitChars(bY.getAttribute("ws-attr-holes"),[" "],1);for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=n.get(bZ,b0);bY.setAttribute(b2,(b3=new a.RegExp("\\${"+bW+"}","ig"),bY.getAttribute(b2).replace(b3,bT.textContent)));}});bX=bS.querySelector("[ws-hole="+bW+"]");if(z.Equals(bX,null)){bU=bS.querySelector("[ws-replace="+bW+"]");return z.Equals(bU,null)?null:(bV(bU.parentNode,bU),void bU.parentNode.removeChild(bU));}else{while(bX.hasChildNodes())bX.removeChild(bX.lastChild);bX.removeAttribute("ws-hole");return bV(bX,null);}}function bP(bS){if(_2.StartsWith(bS.nodeName.toLowerCase(),"ws-"))bR(bS);else{P.convertAttrs(bS);bQ(bS.firstChild);}}function bQ(bS){return bN(0,bS);}function bR(bS){return bN(1,bS);}bL=bJ==null?s.FakeRoot(bI):bJ.$0;bM=(bH==null?"":bH.$0).toLowerCase();s.LoadedTemplateFile(bG).set_Item(bM,bL);n.length(bI)>0?(function(bS){var bT,bU,bV,bW;while(true){bT=bS.querySelector("[ws-template]");if(z.Equals(bT,null)){bU=bS.querySelector("[ws-children-template]");if(z.Equals(bU,null))return null;else{bV=bU.getAttribute("ws-children-template");bU.removeAttribute("ws-children-template");s.PrepareTemplateStrict(bG,{$:1,$0:bV},u.ChildrenArray(bU),null,null);bS=bS;}}else{bW=bT.getAttribute("ws-template");(s.PrepareSingleTemplate(bG,{$:1,$0:bW},bT))(null);bS=bS;}}}(bL),bQ(n.get(bI,0))):void 0;};s.PrepareSingleTemplate=function(bG,bH,bI){var bJ,bK,bL;bJ=s.FakeRootSingle(bI);bK=[bI];bL={$:1,$0:bJ};return function(bM){s.PrepareTemplateStrict(bG,bH,bK,bL,bM);};};s.TextHoleRE=function(){D.$cctor();return D.TextHoleRE;};t.NewFromSeq=function(bG){var bH,bI,bJ;bH={};bI=R.Get(bG);try{while(bI.MoveNext()){bJ=bI.Current();bH[bJ[0]]=bJ[1];}}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}return bH;};u.CreateElement=function(bG){return u.Doc().createElement(bG);};u.SetAttr=function(bG,bH,bI){bG.setAttribute(bH,bI);};u.Doc=function(){H.$cctor();return H.Doc;};u.ChildrenArray=function(bG){var bH,bI,bJ;bH=[];for(bI=0,bJ=bG.childNodes.length-1;bI<=bJ;bI++)bH.push(bG.childNodes[bI]);return bH;};u.IterSelector=function(bG,bH,bI){var bJ,bK,bL;bJ=bG.querySelectorAll(bH);for(bK=0,bL=bJ.length-1;bK<=bL;bK++)bI(bJ[bK]);};u.InsertAt=function(bG,bH,bI){var bJ;if(!(bI.parentNode===bG&&bH===(bJ=bI.nextSibling,z.Equals(bJ,null)?null:bJ)))bG.insertBefore(bI,bH);};u.RemoveNode=function(bG,bH){if(bH.parentNode===bG)bG.removeChild(bH);};v.Static=function(bG){return new q({$:3,$0:bG});};v.Updates=function(bG){return C.MapTreeReduce(function(bH){return bH.NChanged();},A.Const(),A.Map2Unit,bG.DynNodes);};v.AppendTree=function(bG,bH){var bI;return bG===null?bH:bH===null?bG:(bI=new q({$:2,$0:bG,$1:bH}),(v.SetFlags(bI,v.Flags(bG)|v.Flags(bH)),bI));};v.EmptyAttr=function(){_1.$cctor();return _1.EmptyAttr;};v.Insert=function(bG,bH){var bI,bJ,bK;function bL(bM){if(!(bM===null))if(bM!=null&&bM.$==1)bI.push(bM.$0);else if(bM!=null&&bM.$==2){bL(bM.$0);bL(bM.$1);}else if(bM!=null&&bM.$==3)bM.$0(bG);else if(bM!=null&&bM.$==4)bJ.push(bM.$0);}bI=[];bJ=[];bL(bH);bK=bI.slice(0);return Y.New(bG,v.Flags(bH),bK,bJ.length===0?null:{$:1,$0:function(bM){F.iter(function(bN){bN(bM);},bJ);}});};v.SetFlags=function(bG,bH){bG.flags=bH;};v.Flags=function(bG){return bG!==null&&bG.hasOwnProperty("flags")?bG.flags:0;};v.HasExitAnim=function(bG){var bH;bH=2;return(bG.DynFlags&bH)===bH;};v.GetExitAnim=function(bG){return v.GetAnim(bG,function(bH,bI){return bH.NGetExitAnim(bI);});};v.HasEnterAnim=function(bG){var bH;bH=1;return(bG.DynFlags&bH)===bH;};v.GetEnterAnim=function(bG){return v.GetAnim(bG,function(bH,bI){return bH.NGetEnterAnim(bI);});};v.HasChangeAnim=function(bG){var bH;bH=4;return(bG.DynFlags&bH)===bH;};v.GetChangeAnim=function(bG){return v.GetAnim(bG,function(bH,bI){return bH.NGetChangeAnim(bI);});};v.GetAnim=function(bG,bH){return T.Concat(n.map(function(bI){return bH(bI,bG.DynElem);},bG.DynNodes));};v.Sync=function(bG,bH){n.iter(function(bI){bI.NSync(bG);},bH.DynNodes);};y=x.Dictionary=bC.Class({set_Item:function(bG,bH){this.set(bG,bH);},ContainsKey:function(bG){var bH,bI;bH=this;bI=this.data[this.hash(bG)];return bI==null?false:n.exists(function(bJ){return bH.equals.apply(null,[(f.KeyValue(bJ))[0],bG]);},bI);},TryGetValue:function(bG,bH){var bI,bJ,bK;bI=this;bJ=this.data[this.hash(bG)];return bJ==null?false:(bK=n.tryPick(function(bL){var bM;bM=f.KeyValue(bL);return bI.equals.apply(null,[bM[0],bG])?{$:1,$0:bM[1]}:null;},bJ),bK!=null&&bK.$==1&&(bH.set(bK.$0),true));},Remove:function(bG){return this.remove(bG);},get_Keys:function(){return new S.New(this);},set:function(bG,bH){var bI,bJ,bK,bL;bI=this;bJ=this.hash(bG);bK=this.data[bJ];bK==null?(this.count=this.count+1,this.data[bJ]=new a.Array({K:bG,V:bH})):(bL=n.tryFindIndex(function(bM){return bI.equals.apply(null,[(f.KeyValue(bM))[0],bG]);},bK),bL==null?(this.count=this.count+1,bK.push({K:bG,V:bH})):bK[bL.$0]={K:bG,V:bH});},remove:function(bG){var bH,bI,bJ,bK;bH=this;bI=this.hash(bG);bJ=this.data[bI];return bJ==null?false:(bK=n.filter(function(bL){return!bH.equals.apply(null,[(f.KeyValue(bL))[0],bG]);},bJ),n.length(bK)<bJ.length&&(this.count=this.count-1,this.data[bI]=bK,true));},get_Item:function(bG){return this.get(bG);},get:function(bG){var bH,bI;bH=this;bI=this.data[this.hash(bG)];return bI==null?O.notPresent():n.pick(function(bJ){var bK;bK=f.KeyValue(bJ);return bH.equals.apply(null,[bK[0],bG])?{$:1,$0:bK[1]}:null;},bI);},GetEnumerator:function(){return R.Get0(this);},GetEnumerator0:function(){return R.Get0(n.concat(m.GetFieldValues(this.data)));}},h,y);y.New$5=bC.Ctor(function(){y.New$6.call(this,[],z.Equals,z.Hash);},y);y.New$6=bC.Ctor(function(bG,bH,bI){var bJ,bK;h.New.call(this);this.equals=bH;this.hash=bI;this.count=0;this.data=[];bJ=R.Get(bG);try{while(bJ.MoveNext()){bK=bJ.Current();this.set(bK.K,bK.V);}}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}},y);z.Equals=function(bG,bH){var bI,bJ,bK,bL;if(bG===bH)return true;else{bI=typeof bG;if(bI=="object"){if(bG===null||bG===void 0||bH===null||bH===void 0)return false;else if("Equals"in bG)return bG.Equals(bH);else if(bG instanceof a.Array&&bH instanceof a.Array)return z.arrayEquals(bG,bH);else if(bG instanceof a.Date&&bH instanceof a.Date)return z.dateEquals(bG,bH);else{bJ=[true];for(var bM in bG)if(function(bN){bJ[0]=!bG.hasOwnProperty(bN)||bH.hasOwnProperty(bN)&&z.Equals(bG[bN],bH[bN]);return!bJ[0];}(bM))break;if(bJ[0]){for(var bN in bH)if(function(bO){bJ[0]=!bH.hasOwnProperty(bO)||bG.hasOwnProperty(bO);return!bJ[0];}(bN))break;}return bJ[0];}}else return bI=="function"&&("$Func"in bG?bG.$Func===bH.$Func&&bG.$Target===bH.$Target:"$Invokes"in bG&&"$Invokes"in bH&&z.arrayEquals(bG.$Invokes,bH.$Invokes));}};z.arrayEquals=function(bG,bH){var bI,bJ;if(n.length(bG)===n.length(bH)){bI=true;bJ=0;while(bI&&bJ<n.length(bG)){!z.Equals(n.get(bG,bJ),n.get(bH,bJ))?bI=false:void 0;bJ=bJ+1;}return bI;}else return false;};z.dateEquals=function(bG,bH){return bG.getTime()===bH.getTime();};z.Hash=function(bG){var bH;bH=typeof bG;return bH=="function"?0:bH=="boolean"?bG?1:0:bH=="number"?bG:bH=="string"?z.hashString(bG):bH=="object"?bG==null?0:bG instanceof a.Array?z.hashArray(bG):z.hashObject(bG):0;};z.hashString=function(bG){var bH,bI,bJ;if(bG===null)return 0;else{bH=5381;for(bI=0,bJ=bG.length-1;bI<=bJ;bI++)bH=z.hashMix(bH,bG[bI].charCodeAt());return bH;}};z.hashArray=function(bG){var bH,bI,bJ;bH=-34948909;for(bI=0,bJ=n.length(bG)-1;bI<=bJ;bI++)bH=z.hashMix(bH,z.Hash(n.get(bG,bI)));return bH;};z.hashObject=function(bG){var bH,bI;if("GetHashCode"in bG)return bG.GetHashCode();else{bH=[0];for(var bJ in bG)if(function(bK){bH[0]=z.hashMix(z.hashMix(bH[0],z.hashString(bK)),z.Hash(bG[bK]));return false;}(bJ))break;return bH[0];}};z.hashMix=function(bG,bH){return(bG<<5)+bG+bH;};z.Compare=function(bG,bH){var bI,bJ,bK,bL,bM,bN;if(bG===bH)return 0;else{bJ=typeof bG;switch(bJ=="function"?1:bJ=="boolean"?2:bJ=="number"?2:bJ=="string"?2:bJ=="object"?3:0){case 0:return typeof bH=="undefined"?0:-1;case 1:return f.FailWith("Cannot compare function values.");case 2:return bG<bH?-1:1;case 3:if(bG===null)bK=-1;else if(bH===null)bK=1;else if("CompareTo"in bG)bK=bG.CompareTo(bH);else if("CompareTo0"in bG)bK=bG.CompareTo0(bH);else if(bG instanceof a.Array&&bH instanceof a.Array)bK=z.compareArrays(bG,bH);else if(bG instanceof a.Date&&bH instanceof a.Date)bK=z.compareDates(bG,bH);else{bL=[0];for(var bO in bG)if(function(bP){return!bG.hasOwnProperty(bP)?false:!bH.hasOwnProperty(bP)?(bL[0]=1,true):(bL[0]=z.Compare(bG[bP],bH[bP]),bL[0]!==0);}(bO))break;if(bL[0]===0){for(var bP in bH)if(function(bQ){return!bH.hasOwnProperty(bQ)?false:!bG.hasOwnProperty(bQ)&&(bL[0]=-1,true);}(bP))break;}bK=bL[0];}return bK;}}};z.compareArrays=function(bG,bH){var bI,bJ;if(n.length(bG)<n.length(bH))return -1;else if(n.length(bG)>n.length(bH))return 1;else{bI=0;bJ=0;while(bI===0&&bJ<n.length(bG)){bI=z.Compare(n.get(bG,bJ),n.get(bH,bJ));bJ=bJ+1;}return bI;}};z.compareDates=function(bG,bH){return z.Compare(bG.getTime(),bH.getTime());};A=i.View=bC.Class({},null,A);B=i.Elt=bC.Class({},p,B);B.New=function(bG,bH,bI){var bJ,bK;bJ=I.CreateElemNode(bG,bH,bI.docNode);bK=L.Create(bI.updates);return new B.New$1({$:1,$0:bJ},A.Map2Unit(v.Updates(bJ.Attr),bK.v),bG,bK);};B.New$1=bC.Ctor(function(bG,bH,bI,bJ){p.New.call(this,bG,bH);this.docNode$1=bG;this.updates$1=bH;this.elt=bI;this.rvUpdates=bJ;},B);C.ofSeqNonCopying=function(bG){var bH,bI;if(bG instanceof a.Array)return bG;else if(bG instanceof N)return n.ofList(bG);else if(bG===null)return[];else{bH=[];bI=R.Get(bG);try{while(bI.MoveNext())bH.push(bI.Current());return bH;}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}}};C.TreeReduce=function(bG,bH,bI){var bJ;function bK(bL,bM){var bN,bO;return bM<=0?bG:bM===1&&(bL>=0&&bL<bJ)?n.get(bI,bL):(bO=bM/2>>0,bH(bK(bL,bO),bK(bL+bO,bM-bO)));}bJ=n.length(bI);return bK(0,bJ);};C.MapTreeReduce=function(bG,bH,bI,bJ){var bK;function bL(bM,bN){var bO,bP;return bN<=0?bH:bN===1&&(bM>=0&&bM<bK)?bG(n.get(bJ,bM)):(bP=bN/2>>0,bI(bL(bM,bP),bL(bM+bP,bN-bP)));}bK=n.length(bJ);return bL(0,bK);};D.$cctor=function(){D.$cctor=a.ignore;D.LoadedTemplates=new y.New$5();D.LocalTemplatesLoaded=false;D.TextHoleRE="\\${([^}]+)}";};E=x.HashSet=bC.Class({Add:function(bG){return this.add(bG);},Contains:function(bG){var bH;bH=this.data[this.hash(bG)];return bH==null?false:this.arrContains(bG,bH);},add:function(bG){var bH,bI;bH=this.hash(bG);bI=this.data[bH];return bI==null?(this.data[bH]=[bG],this.count=this.count+1,true):this.arrContains(bG,bI)?false:(bI.push(bG),this.count=this.count+1,true);},arrContains:function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=bH.length;while(bI&&bJ<bL)if(this.equals.apply(null,[bH[bJ],bG]))bI=false;else bJ=bJ+1;return!bI;},ExceptWith:function(bG){var bH;bH=R.Get(bG);try{while(bH.MoveNext())this.Remove(bH.Current());}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bG){var bH,bI,bJ,bK;bH=0;bI=ba.concat(this.data);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++)n.set(bG,bJ,bI[bJ]);},IntersectWith:function(bG){var bH,bI,bJ,bK,bL;bH=new E.New$4(bG,this.equals,this.hash);bI=ba.concat(this.data);for(bJ=0,bK=bI.length-1;bJ<=bK;bJ++){bL=bI[bJ];!bH.Contains(bL)?this.Remove(bL):void 0;}},Remove:function(bG){var bH;bH=this.data[this.hash(bG)];return bH==null?false:this.arrRemove(bG,bH)&&(this.count=this.count-1,true);},arrRemove:function(bG,bH){var bI,bJ,bK,bL;bI=true;bJ=0;bL=bH.length;while(bI&&bJ<bL)if(this.equals.apply(null,[bH[bJ],bG])){bH.splice.apply(bH,[bJ,1]);bI=false;}else bJ=bJ+1;return!bI;},GetEnumerator:function(){return R.Get(ba.concat(this.data));},GetEnumerator0:function(){return R.Get(ba.concat(this.data));}},h,E);E.New$3=bC.Ctor(function(){E.New$4.call(this,[],z.Equals,z.Hash);},E);E.New$4=bC.Ctor(function(bG,bH,bI){var bJ;h.New.call(this);this.equals=bH;this.hash=bI;this.data=[];this.count=0;bJ=R.Get(bG);try{while(bJ.MoveNext())this.add(bJ.Current());}finally{if(typeof bJ=="object"&&"Dispose"in bJ)bJ.Dispose();}},E);E.New$2=bC.Ctor(function(bG){E.New$4.call(this,bG,z.Equals,z.Hash);},E);F.head=function(bG){var bH;bH=R.Get(bG);try{return bH.MoveNext()?bH.Current():F.insufficient();}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}};F.fold=function(bG,bH,bI){var bJ,bK;bJ=bH;bK=R.Get(bI);try{while(bK.MoveNext())bJ=bG(bJ,bK.Current());return bJ;}finally{if(typeof bK=="object"&&"Dispose"in bK)bK.Dispose();}};F.iter=function(bG,bH){var bI;bI=R.Get(bH);try{while(bI.MoveNext())bG(bI.Current());}finally{if(typeof bI=="object"&&"Dispose"in bI)bI.Dispose();}};F.map=function(bG,bH){return{GetEnumerator:function(){var bI;bI=R.Get(bH);return new _8.New(null,null,function(bJ){return bI.MoveNext()&&(bJ.c=bG(bI.Current()),true);},function(){bI.Dispose();});}};};F.max=function(bG){var bH,bI,bJ;bH=R.Get(bG);try{if(!bH.MoveNext())F.seqEmpty();bI=bH.Current();while(bH.MoveNext()){bJ=bH.Current();z.Compare(bJ,bI)===1?bI=bJ:void 0;}return bI;}finally{if(typeof bH=="object"&&"Dispose"in bH)bH.Dispose();}};F.seqEmpty=function(){return f.FailWith("The input sequence was empty.");};H.$cctor=function(){H.$cctor=a.ignore;H.Doc=self.document;};I.LinkElement=function(bG,bH){I.InsertDoc(bG,bH,null);};I.CreateElemNode=function(bG,bH,bI){var bJ;I.LinkElement(bG,bI);bJ=v.Insert(bG,bH);return J.New(bJ,bI,null,bG,Z.Int(),bC.GetOptional(bJ.OnAfterRender));};I.InsertDoc=function(bG,bH,bI){var bJ;return bH!=null&&bH.$==1?I.InsertNode(bG,bH.$0.El,bI):bH!=null&&bH.$==2?(bJ=bH.$0,(bJ.Dirty=false,I.InsertDoc(bG,bJ.Current,bI))):bH==null?bI:bH!=null&&bH.$==4?I.InsertNode(bG,bH.$0.Text,bI):bH!=null&&bH.$==5?I.InsertNode(bG,bH.$0,bI):bH!=null&&bH.$==6?n.foldBack(function(bK,bL){return bK==null||bK.constructor===g?I.InsertDoc(bG,bK,bL):I.InsertNode(bG,bK,bL);},bH.$0.Els,bI):I.InsertDoc(bG,bH.$0,I.InsertDoc(bG,bH.$1,bI));};I.CreateRunState=function(bG,bH){return _4.New(_5.get_Empty(),I.CreateElemNode(bG,v.EmptyAttr(),bH));};I.PerformAnimatedUpdate=function(bG,bH,bI){var bJ;return T.get_UseAnimations()?(bJ=null,_.Delay(function(){var bK,bL,bM;bK=_5.FindAll(bI);bL=I.ComputeChangeAnim(bH,bK);bM=I.ComputeEnterAnim(bH,bK);return _.Bind(T.Play(T.Append(bL,I.ComputeExitAnim(bH,bK))),function(){return _.Bind(I.SyncElemNodesNextFrame(bG,bH),function(){return _.Bind(T.Play(bM),function(){bH.PreviousNodes=bK;return _.Return(null);});});});})):I.SyncElemNodesNextFrame(bG,bH);};I.PerformSyncUpdate=function(bG,bH,bI){var bJ;bJ=_5.FindAll(bI);I.SyncElemNode(bG,bH.Top);bH.PreviousNodes=bJ;};I.InsertNode=function(bG,bH,bI){u.InsertAt(bG,bI,bH);return bH;};I.SyncElemNodesNextFrame=function(bG,bH){function bI(bJ){a.requestAnimationFrame(function(){I.SyncElemNode(bG,bH.Top);bJ();});}return U.BatchUpdatesEnabled()?_.FromContinuations(function(bJ,bK,bL){return bI.apply(null,[bJ,bK,bL]);}):(I.SyncElemNode(bG,bH.Top),_.Return(null));};I.ComputeExitAnim=function(bG,bH){return T.Concat(n.map(function(bI){return v.GetExitAnim(bI.Attr);},_5.ToArray(_5.Except(bH,_5.Filter(function(bI){return v.HasExitAnim(bI.Attr);},bG.PreviousNodes)))));};I.ComputeEnterAnim=function(bG,bH){return T.Concat(n.map(function(bI){return v.GetEnterAnim(bI.Attr);},_5.ToArray(_5.Except(bG.PreviousNodes,_5.Filter(function(bI){return v.HasEnterAnim(bI.Attr);},bH)))));};I.ComputeChangeAnim=function(bG,bH){var bI;function bJ(bK){return v.HasChangeAnim(bK.Attr);}bI=function(bK){return _5.Filter(bJ,bK);};return T.Concat(n.map(function(bK){return v.GetChangeAnim(bK.Attr);},_5.ToArray(_5.Intersect(bI(bG.PreviousNodes),bI(bH)))));};I.SyncElemNode=function(bG,bH){!bG?I.SyncElement(bH):void 0;I.Sync(bH.Children);I.AfterRender(bH);};I.SyncElement=function(bG){function bH(bI){function bJ(bK){var bL,bM;return bK!=null&&bK.$==0?bJ(bK.$0)||bJ(bK.$1):bK!=null&&bK.$==2?(bL=bK.$0,bL.Dirty||bJ(bL.Current)):bK!=null&&bK.$==6&&(bM=bK.$0,bM.Dirty||n.exists(bH,bM.Holes));}return bJ(bI.Children);}v.Sync(bG.El,bG.Attr);bH(bG)?I.DoSyncElement(bG):void 0;};I.Sync=function(bG){var bH,bI;if(bG!=null&&bG.$==1)I.SyncElemNode(false,bG.$0);else if(bG!=null&&bG.$==2)I.Sync(bG.$0.Current);else if(bG==null);else if(bG!=null&&bG.$==5);else if(bG!=null&&bG.$==4){bH=bG.$0;bH.Dirty?(bH.Text.nodeValue=bH.Value,bH.Dirty=false):void 0;}else if(bG!=null&&bG.$==6){bI=bG.$0;n.iter(function(bJ){I.SyncElemNode(false,bJ);},bI.Holes);n.iter(function(bJ){v.Sync(bJ[0],bJ[1]);},bI.Attrs);I.AfterRender(bI);}else{I.Sync(bG.$0);I.Sync(bG.$1);}};I.AfterRender=function(bG){var bH;bH=bC.GetOptional(bG.Render);bH!=null&&bH.$==1?(bH.$0(bG.El),bC.SetOptional(bG,"Render",null)):void 0;};I.DoSyncElement=function(bG){var bH,bI,bJ;function bK(bL,bM){var bN,bO;return bL!=null&&bL.$==1?bL.$0.El:bL!=null&&bL.$==2?(bN=bL.$0,bN.Dirty?(bN.Dirty=false,I.InsertDoc(bH,bN.Current,bM)):bK(bN.Current,bM)):bL==null?bM:bL!=null&&bL.$==4?bL.$0.Text:bL!=null&&bL.$==5?bL.$0:bL!=null&&bL.$==6?(bO=bL.$0,(bO.Dirty?bO.Dirty=false:void 0,n.foldBack(function(bP,bQ){return bP==null||bP.constructor===g?bK(bP,bQ):bP;},bO.Els,bM))):bK(bL.$0,bK(bL.$1,bM));}bH=bG.El;bj.Iter((bI=bG.El,function(bL){u.RemoveNode(bI,bL);}),bj.Except(bj.DocChildren(bG),bj.Children(bG.El,bC.GetOptional(bG.Delimiters))));bK(bG.Children,(bJ=bC.GetOptional(bG.Delimiters),bJ!=null&&bJ.$==1?bJ.$0[1]:null));};J=i.DocElemNode=bC.Class({Equals:function(bG){return this.ElKey===bG.ElKey;},GetHashCode:function(){return this.ElKey;}},null,J);J.New=function(bG,bH,bI,bJ,bK,bL){var bM;return new J((bM={Attr:bG,Children:bH,El:bJ,ElKey:bK},(bC.SetOptional(bM,"Delimiters",bI),bC.SetOptional(bM,"Render",bL),bM)));};L=i.Updates=bC.Class({},null,L);L.Create=function(bG){var bH;bH=null;bH=L.New(bG,null,function(){var bI;bI=bH.s;return bI===null?(bI=_0.Copy(bH.c()),bH.s=bI,_0.WhenObsoleteRun(bI,function(){bH.s=null;}),bI):bI;});return bH;};L.New=function(bG,bH,bI){return new L({c:bG,s:bH,v:bI});};A.Map2Unit=function(bG,bH){return A.CreateLazy(function(){return _0.Map2Unit(bG(),bH());});};A.Const=function(bG){var bH;bH=_0.New({$:0,$0:bG});return function(){return bH;};};A.Sink=function(bG,bH){function bI(){_0.WhenRun(bH(),bG,function(){_.scheduler().Fork(bI);});}_.scheduler().Fork(bI);};A.CreateLazy=function(bG){var bH;bH={c:null,o:bG};return function(){var bI,bJ;bI=bH.c;return bI===null?(bI=bH.o(),bH.c=bI,(bJ=bI.s,bJ!=null&&bJ.$==0)?bH.o=null:_0.WhenObsoleteRun(bI,function(){bH.c=null;}),bI):bI;};};N=M.T=bC.Class({GetEnumerator:function(){return new _8.New(this,null,function(bG){var bH;bH=bG.s;return bH.$==0?false:(bG.c=bH.$0,bG.s=bH.$1,true);},void 0);},GetEnumerator0:function(){return R.Get(this);}},null,N);O.notPresent=function(){return f.FailWith("The given key was not present in the dictionary.");};P.convertTextNode=function(bG){var bH,bI,bJ,bK,bL,bM;bH=null;bI=0;bK=bG.textContent;bL=new a.RegExp(s.TextHoleRE(),"g");while(bH=bL.exec(bK),bH!==null){bG.parentNode.insertBefore(self.document.createTextNode(Q.string(bK,{$:1,$0:bI},{$:1,$0:bL.lastIndex-n.get(bH,0).length-1})),bG);bI=bL.lastIndex;bM=self.document.createElement("span");bM.setAttribute("ws-replace",n.get(bH,1).toLowerCase());bG.parentNode.insertBefore(bM,bG);}bL.lastIndex=0;bG.textContent=Q.string(bK,{$:1,$0:bI},null);};P.failNotLoaded=function(bG){bD.warn("Instantiating non-loaded template",bG);};P.fillTextHole=function(bG,bH,bI){var bJ;bJ=bG.querySelector("[ws-replace]");return z.Equals(bJ,null)?(bD.warn("Filling non-existent text hole",bI),null):(bJ.parentNode.replaceChild(new a.Text(bH),bJ),{$:1,$0:bJ.getAttribute("ws-replace")});};P.removeHolesExcept=function(bG,bH){function bI(bJ){u.IterSelector(bG,"["+bJ+"]",function(bK){if(!bH.Contains(bK.getAttribute(bJ)))bK.removeAttribute(bJ);});}bI("ws-attr");bI("ws-onafterrender");bI("ws-var");u.IterSelector(bG,"[ws-hole]",function(bJ){if(!bH.Contains(bJ.getAttribute("ws-hole"))){bJ.removeAttribute("ws-hole");while(bJ.hasChildNodes())bJ.removeChild(bJ.lastChild);}});u.IterSelector(bG,"[ws-replace]",function(bJ){if(!bH.Contains(bJ.getAttribute("ws-replace")))bJ.parentNode.removeChild(bJ);});u.IterSelector(bG,"[ws-on]",function(bJ){bJ.setAttribute("ws-on",_2.concat(" ",n.filter(function(bK){return bH.Contains(n.get(_2.SplitChars(bK,[":"],1),1));},_2.SplitChars(bJ.getAttribute("ws-on"),[" "],1))));});u.IterSelector(bG,"[ws-attr-holes]",function(bJ){var bK,bL,bM,bN,bO;bK=_2.SplitChars(bJ.getAttribute("ws-attr-holes"),[" "],1);for(bL=0,bM=bK.length-1;bL<=bM;bL++){bN=n.get(bK,bL);bJ.setAttribute(bN,(bO=new a.RegExp(s.TextHoleRE(),"g"),bJ.getAttribute(bN).replace(bO,function(bP,bQ){return bH.Contains(bQ)?bP:"";})));}});};P.fillInstanceAttrs=function(bG,bH){var bI,bJ,bK,bL,bM;P.convertAttrs(bH);bI=bH.nodeName.toLowerCase();bJ=bG.querySelector("[ws-attr="+bI+"]");if(z.Equals(bJ,null))bD.warn("Filling non-existent attr hole",bI);else{bJ.removeAttribute("ws-attr");for(bK=0,bL=bH.attributes.length-1;bK<=bL;bK++){bM=bH.attributes.item(bK);bM.name==="class"&&bJ.hasAttribute("class")?bJ.setAttribute("class",bJ.getAttribute("class")+" "+bM.nodeValue):bJ.setAttribute(bM.name,bM.nodeValue);}}};P.mapHoles=function(bG,bH){function bI(bJ){u.IterSelector(bG,"["+bJ+"]",function(bK){var bL,bM;bL=(bM=null,[bH.TryGetValue(bK.getAttribute(bJ).toLowerCase(),{get:function(){return bM;},set:function(bN){bM=bN;}}),bM]);bL[0]?bK.setAttribute(bJ,bL[1]):void 0;});}bI("ws-hole");bI("ws-replace");bI("ws-attr");bI("ws-onafterrender");bI("ws-var");u.IterSelector(bG,"[ws-on]",function(bJ){bJ.setAttribute("ws-on",_2.concat(" ",n.map(function(bK){var bL,bM,bN;bL=_2.SplitChars(bK,[":"],1);bM=(bN=null,[bH.TryGetValue(n.get(bL,1),{get:function(){return bN;},set:function(bO){bN=bO;}}),bN]);return bM[0]?n.get(bL,0)+":"+bM[1]:bK;},_2.SplitChars(bJ.getAttribute("ws-on"),[" "],1))));});u.IterSelector(bG,"[ws-attr-holes]",function(bJ){var bK,bL,bM;bK=_2.SplitChars(bJ.getAttribute("ws-attr-holes"),[" "],1);for(bL=0,bM=bK.length-1;bL<=bM;bL++)(function(){var bN;function bO(bP,bQ){var bR;bR=f.KeyValue(bQ);return bP.replace(new a.RegExp("\\${"+bR[0]+"}","ig"),"${"+bR[1]+"}");}bN=n.get(bK,bL);return bJ.setAttribute(bN,(((bC.Curried3(F.fold))(bO))(bJ.getAttribute(bN)))(bH));}());});};P.fill=function(bG,bH,bI){while(true)if(bG.hasChildNodes())bI=bH.insertBefore(bG.lastChild,bI);else return null;};P.convertAttrs=function(bG){var bI,bJ,bK,bL,bM,bN,bO,bP;function bH(bQ){var bR;bR=bG.getAttribute(bQ);bR===null?void 0:bG.setAttribute(bQ,bR.toLowerCase());}bI=bG.attributes;bJ=[];bK=[];bL=[];for(bM=0,bN=bI.length-1;bM<=bN;bM++){bO=bI.item(bM);_2.StartsWith(bO.nodeName,"ws-on")&&bO.nodeName!=="ws-onafterrender"&&bO.nodeName!=="ws-on"?(bJ.push(bO.nodeName),bK.push(Q.string(bO.nodeName,{$:1,$0:"ws-on".length},null)+":"+bO.nodeValue.toLowerCase())):!_2.StartsWith(bO.nodeName,"ws-")&&(new a.RegExp(s.TextHoleRE())).test(bO.nodeValue)?(bO.nodeValue=(bP=new a.RegExp(s.TextHoleRE(),"g"),bO.nodeValue.replace(bP,function(bQ,bR){return"${"+bR.toLowerCase()+"}";})),bL.push(bO.nodeName)):void 0;}!(bK.length==0)?bG.setAttribute("ws-on",_2.concat(" ",bK)):void 0;!(bL.length==0)?bG.setAttribute("ws-attr-holes",_2.concat(" ",bL)):void 0;bH("ws-hole");bH("ws-replace");bH("ws-attr");bH("ws-onafterrender");bH("ws-var");n.iter(function(bQ){bG.removeAttribute(bQ);},bJ);};Q.string=function(bG,bH,bI){return bH==null?bI!=null&&bI.$==1?bG.slice(0,bI.$0+1):"":bI==null?bG.slice(bH.$0):bG.slice(bH.$0,bI.$0+1);};R.Get=function(bG){return bG instanceof a.Array?R.ArrayEnumerator(bG):z.Equals(typeof bG,"string")?R.StringEnumerator(bG):bG.GetEnumerator();};R.ArrayEnumerator=function(bG){return new _8.New(0,null,function(bH){var bI;bI=bH.s;return bI<n.length(bG)&&(bH.c=n.get(bG,bI),bH.s=bI+1,true);},void 0);};R.StringEnumerator=function(bG){return new _8.New(0,null,function(bH){var bI;bI=bH.s;return bI<bG.length&&(bH.c=bG[bI],bH.s=bI+1,true);},void 0);};R.Get0=function(bG){return bG instanceof a.Array?R.ArrayEnumerator(bG):z.Equals(typeof bG,"string")?R.StringEnumerator(bG):"GetEnumerator0"in bG?bG.GetEnumerator0():bG.GetEnumerator();};F.insufficient=function(){return f.FailWith("The input sequence has an insufficient number of elements.");};S=x.KeyCollection=bC.Class({GetEnumerator$1:function(){return R.Get(F.map(function(bG){return bG.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},h,S);S.New=bC.Ctor(function(bG){h.New.call(this);this.d=bG;},S);T.get_UseAnimations=function(){return _6.UseAnimations();};T.Play=function(bG){var bH;bH=null;return _.Delay(function(){return _.Bind(T.Run(a.ignore,_6.Actions(bG)),function(){_6.Finalize(bG);return _.Return(null);});});};T.Append=function(bG,bH){return{$:0,$0:$.Append(bG.$0,bH.$0)};};T.Run=function(bG,bH){var bI;function bJ(bK){function bL(bM,bN){var bO;bO=bN-bM;bH.Compute(bO);bG();return bO<=bI?void a.requestAnimationFrame(function(bP){bL(bM,bP);}):bK();}a.requestAnimationFrame(function(bM){bL(bM,bM);});}bI=bH.Duration;return bI===0?_.Zero():_.FromContinuations(function(bK,bL,bM){return bJ.apply(null,[bK,bL,bM]);});};T.Concat=function(bG){return{$:0,$0:$.Concat(F.map(_6.List,bG))};};U.BatchUpdatesEnabled=function(){_7.$cctor();return _7.BatchUpdatesEnabled;};W.StartProcessor=function(bG){var bH;function bI(){var bJ;bJ=null;return _.Delay(function(){return _.Bind(bG,function(){var bK;bK=bH[0];return bK===1?(bH[0]=0,_.Zero()):bK===2?(bH[0]=1,bI()):_.Zero();});});}bH=[0];return function(){var bJ;bJ=bH[0];bJ===0?(bH[0]=1,_.Start(bI(),null)):bJ===1?bH[0]=2:void 0;};};Y.New=function(bG,bH,bI,bJ){var bK;bK={DynElem:bG,DynFlags:bH,DynNodes:bI};bC.SetOptional(bK,"OnAfterRender",bJ);return bK;};Z.Int=function(){Z.set_counter(Z.counter()+1);return Z.counter();};Z.set_counter=function(bG){bb.$cctor();bb.counter=bG;};Z.counter=function(){bb.$cctor();return bb.counter;};_0.Copy=function(bG){var bH,bI,bJ;bH=bG.s;return bH==null?bG:bH!=null&&bH.$==2?(bI=_0.New({$:2,$0:bH.$0,$1:[]}),(_0.WhenObsolete(bG,bI),bI)):bH!=null&&bH.$==3?(bJ=_0.New({$:3,$0:[],$1:[]}),(_0.When(bG,function(bK){_0.MarkDone(bJ,bG,bK);},bJ),bJ)):bG;};_0.WhenObsoleteRun=function(bG,bH){var bI;bI=bG.s;bI==null?bH():bI!=null&&bI.$==2?bI.$1.push(bH):bI!=null&&bI.$==3?bI.$1.push(bH):void 0;};_0.Map2Unit=function(bG,bH){var bI,bJ,bK;function bL(){var bM,bN,bO;if(!(bM=bK.s,bM!=null&&bM.$==0||bM!=null&&bM.$==2)){bN=_0.ValueAndForever(bG);bO=_0.ValueAndForever(bH);bN!=null&&bN.$==1?bO!=null&&bO.$==1?bN.$0[1]&&bO.$0[1]?_0.MarkForever(bK,null):_0.MarkReady(bK,null):void 0:void 0;}}bI=bG.s;bJ=bH.s;return bI!=null&&bI.$==0?bJ!=null&&bJ.$==0?_0.New({$:0,$0:null}):bH:bJ!=null&&bJ.$==0?bG:(bK=_0.New({$:3,$0:[],$1:[]}),(_0.When(bG,bL,bK),_0.When(bH,bL,bK),bK));};_0.WhenRun=function(bG,bH,bI){var bJ;bJ=bG.s;bJ==null?bI():bJ!=null&&bJ.$==2?(bJ.$1.push(bI),bH(bJ.$0)):bJ!=null&&bJ.$==3?(bJ.$0.push(bH),bJ.$1.push(bI)):bH(bJ.$0);};_0.WhenObsolete=function(bG,bH){var bI;bI=bG.s;bI==null?_0.Obsolete(bH):bI!=null&&bI.$==2?_0.EnqueueSafe(bI.$1,bH):bI!=null&&bI.$==3?_0.EnqueueSafe(bI.$1,bH):void 0;};_0.When=function(bG,bH,bI){var bJ;bJ=bG.s;bJ==null?_0.Obsolete(bI):bJ!=null&&bJ.$==2?(_0.EnqueueSafe(bJ.$1,bI),bH(bJ.$0)):bJ!=null&&bJ.$==3?(bJ.$0.push(bH),_0.EnqueueSafe(bJ.$1,bI)):bH(bJ.$0);};_0.MarkDone=function(bG,bH,bI){var bJ;if(bJ=bH.s,bJ!=null&&bJ.$==0)_0.MarkForever(bG,bI);else _0.MarkReady(bG,bI);};_0.ValueAndForever=function(bG){var bH;bH=bG.s;return bH!=null&&bH.$==0?{$:1,$0:[bH.$0,true]}:bH!=null&&bH.$==2?{$:1,$0:[bH.$0,false]}:null;};_0.MarkForever=function(bG,bH){var bI,bJ,bK,bL;bI=bG.s;if(bI!=null&&bI.$==3){bG.s={$:0,$0:bH};bJ=bI.$0;for(bK=0,bL=n.length(bJ)-1;bK<=bL;bK++)(n.get(bJ,bK))(bH);}else void 0;};_0.MarkReady=function(bG,bH){var bI,bJ,bK,bL;bI=bG.s;if(bI!=null&&bI.$==3){bG.s={$:2,$0:bH,$1:bI.$1};bJ=bI.$0;for(bK=0,bL=n.length(bJ)-1;bK<=bL;bK++)(n.get(bJ,bK))(bH);}else void 0;};_0.EnqueueSafe=function(bG,bH){var bI,bJ,bK,bL;bG.push(bH);if(bG.length%20===0){bI=bG.slice(0);bk.Clear(bG);for(bJ=0,bK=n.length(bI)-1;bJ<=bK;bJ++){bL=n.get(bI,bJ);typeof bL=="object"?function(bM){if(bM.s)bG.push(bM);}(bL):function(bM){bG.push(bM);}(bL);}}else void 0;};M.head=function(bG){return bG.$==1?bG.$0:M.listEmpty();};M.tail=function(bG){return bG.$==1?bG.$1:M.listEmpty();};M.listEmpty=function(){return f.FailWith("The input list was empty.");};_1.$cctor=function(){_1.$cctor=a.ignore;_1.EmptyAttr=null;};_2.concat=function(bG,bH){return n.ofSeq(bH).join(bG);};_2.SplitChars=function(bG,bH,bI){return _2.Split(bG,new a.RegExp("["+_2.RegexEscape(bH.join(""))+"]"),bI);};_2.StartsWith=function(bG,bH){return bG.substring(0,bH.length)==bH;};_2.Split=function(bG,bH,bI){return bI===1?n.filter(function(bJ){return bJ!=="";},_2.SplitWith(bG,bH)):_2.SplitWith(bG,bH);};_2.RegexEscape=function(bG){return bG.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};_2.SplitWith=function(bG,bH){return bG.split(bH);};_4.New=function(bG,bH){return{PreviousNodes:bG,Top:bH};};_5.get_Empty=function(){return{$:0,$0:new E.New$3()};};_5.FindAll=function(bG){var bH;function bI(bK){if(bK!=null&&bK.$==0){bI(bK.$0);bI(bK.$1);}else if(bK!=null&&bK.$==1)bJ(bK.$0);else if(bK!=null&&bK.$==2)bI(bK.$0.Current);else if(bK!=null&&bK.$==6)n.iter(bJ,bK.$0.Holes);}function bJ(bK){bH.push(bK);bI(bK.Children);}bH=[];bI(bG);return{$:0,$0:new E.New$2(bH)};};_5.Filter=function(bG,bH){return{$:0,$0:bg.Filter(bG,bH.$0)};};_5.Except=function(bG,bH){return{$:0,$0:bg.Except(bG.$0,bH.$0)};};_5.ToArray=function(bG){return bg.ToArray(bG.$0);};_5.Intersect=function(bG,bH){return{$:0,$0:bg.Intersect(bG.$0,bH.$0)};};_6.UseAnimations=function(){_9.$cctor();return _9.UseAnimations;};_6.Actions=function(bG){return _6.ConcatActions(n.choose(function(bH){return bH.$==1?{$:1,$0:bH.$0}:null;},$.ToArray(bG.$0)));};_6.Finalize=function(bG){n.iter(function(bH){if(bH.$==0)bH.$0();},$.ToArray(bG.$0));};_6.ConcatActions=function(bG){var bH,bI,bJ,bK;bH=C.ofSeqNonCopying(bG);bI=n.length(bH);return bI===0?_6.Const():bI===1?n.get(bH,0):(bJ=F.max(F.map(function(bL){return bL.Duration;},bH)),(bK=n.map(function(bL){return _6.Prolong(bJ,bL);},bH),_6.Def(bJ,function(bL){n.iter(function(bM){bM.Compute(bL);},bK);})));};_6.List=function(bG){return bG.$0;};_6.Const=function(bG){return _6.Def(0,function(){return bG;});};_6.Def=function(bG,bH){return{Compute:bH,Duration:bG};};_6.Prolong=function(bG,bH){var bI,bJ,bK;bI=bH.Compute;bJ=bH.Duration;bK=bn.Create(function(){return bH.Compute(bH.Duration);});return{Compute:function(bL){return bL>=bJ?bK.f():bI(bL);},Duration:bG};};_7.$cctor=function(){_7.$cctor=a.ignore;_7.BatchUpdatesEnabled=true;};_8=R.T=bC.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},h,_8);_8.New=bC.Ctor(function(bG,bH,bI,bJ){h.New.call(this);this.s=bG;this.c=bH;this.n=bI;this.d=bJ;},_8);_0.Obsolete=function(bG){var bH,bI,bJ,bK,bL;bI=bG.s;if(bI==null||(bI!=null&&bI.$==2?(bH=bI.$1,false):bI!=null&&bI.$==3?(bH=bI.$1,false):true))void 0;else{bG.s=null;for(bJ=0,bK=n.length(bH)-1;bJ<=bK;bJ++){bL=n.get(bH,bJ);typeof bL=="object"?function(bM){_0.Obsolete(bM);}(bL):bL();}}};_0.New=function(bG){return{s:bG};};_9.$cctor=function(){_9.$cctor=a.ignore;_9.CubicInOut=bc.Custom(function(bG){var bH;bH=bG*bG;return 3*bH-2*(bH*bG);});_9.UseAnimations=true;};_.Delay=function(bG){return function(bH){try{(bG(null))(bH);}catch(bI){bH.k({$:1,$0:bI});}};};_.Bind=function(bG,bH){return _.checkCancel(function(bI){bG(bd.New(function(bJ){var bK;if(bJ.$==0){bK=bJ.$0;_.scheduler().Fork(function(){try{(bH(bK))(bI);}catch(bL){bI.k({$:1,$0:bL});}});}else _.scheduler().Fork(function(){bI.k(bJ);});},bI.ct));});};_.Zero=function(){be.$cctor();return be.Zero;};_.Start=function(bG,bH){var bI,bJ;bI=(bJ=(_.defCTS())[0],bH==null?bJ:bH.$0);_.scheduler().Fork(function(){if(!bI.c)bG(bd.New(function(bK){if(bK.$==1)_.UncaughtAsyncError(bK.$0);},bI));});};_.Return=function(bG){return function(bH){bH.k({$:0,$0:bG});};};_.checkCancel=function(bG){return function(bH){if(bH.ct.c)_.cancel(bH);else bG(bH);};};_.defCTS=function(){be.$cctor();return be.defCTS;};_.UncaughtAsyncError=function(bG){bD.log("WebSharper: Uncaught asynchronous exception",bG);};_.FromContinuations=function(bG){return function(bH){var bI;function bJ(bK){if(bI[0])f.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bI[0]=true;_.scheduler().Fork(bK);}}bI=[false];bG(function(bK){bJ(function(){bH.k({$:0,$0:bK});});},function(bK){bJ(function(){bH.k({$:1,$0:bK});});},function(bK){bJ(function(){bH.k({$:2,$0:bK});});});};};_.cancel=function(bG){bG.k({$:2,$0:new bm.New(bG.ct)});};_.scheduler=function(){be.$cctor();return be.scheduler;};$.Append=function(bG,bH){return bG.$==0?bH:bH.$==0?bG:{$:2,$0:bG,$1:bH};};$.ToArray=function(bG){var bH;function bI(bJ){if(bJ.$==1)bH.push(bJ.$0);else if(bJ.$==2){bI(bJ.$0);bI(bJ.$1);}else if(bJ.$==3)n.iter(function(bK){bH.push(bK);},bJ.$0);}bH=[];bI(bG);return bH.slice(0);};$.Concat=function(bG){var bH;bH=C.ofSeqNonCopying(bG);return C.TreeReduce($.Empty(),$.Append,bH);};$.Empty=function(){bo.$cctor();return bo.Empty;};ba.concat=function(bG){var bH,bI;bH=[];for(var bJ in bG)bH.push.apply(bH,bG[bJ]);return bH;};bb.$cctor=function(){bb.$cctor=a.ignore;bb.counter=0;};bc=i.Easing=bC.Class({},h,bc);bc.Custom=function(bG){return new bc.New(bG);};bc.New=bC.Ctor(function(bG){h.New.call(this);this.transformTime=bG;},bc);bd.New=function(bG,bH){return{k:bG,ct:bH};};be.$cctor=function(){be.$cctor=a.ignore;be.noneCT=bf.New(false,[]);be.scheduler=new bh.New();be.defCTS=[new bi.New()];be.Zero=_.Return();be.GetCT=function(bG){bG.k({$:0,$0:bG.ct});};};bf.New=function(bG,bH){return{c:bG,r:bH};};bg.Filter=function(bG,bH){return new E.New$2(n.filter(bG,bg.ToArray(bH)));};bg.Except=function(bG,bH){var bI;bI=new E.New$2(bg.ToArray(bH));bI.ExceptWith(bg.ToArray(bG));return bI;};bg.ToArray=function(bG){var bH;bH=n.create(bG.get_Count(),void 0);bG.CopyTo(bH);return bH;};bg.Intersect=function(bG,bH){var bI;bI=new E.New$2(bg.ToArray(bG));bI.IntersectWith(bg.ToArray(bH));return bI;};bh=_.Scheduler=bC.Class({Fork:function(bG){var bH;bH=this;this.robin.push(bG);this.idle?(this.idle=false,a.setTimeout(function(){bH.tick();},0)):void 0;},tick:function(){var bG,bH,bI;bH=this;bI=bF.now();bG=true;while(bG)if(this.robin.length===0){this.idle=true;bG=false;}else{(this.robin.shift())();bF.now()-bI>40?(a.setTimeout(function(){bH.tick();},0),bG=false):void 0;}}},h,bh);bh.New=bC.Ctor(function(){h.New.call(this);this.idle=true;this.robin=[];},bh);bi=e.CancellationTokenSource=bC.Class({},h,bi);bi.New=bC.Ctor(function(){h.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bi);bj.Children=function(bG,bH){var bI,bJ,bK;if(bH!=null&&bH.$==1){bK=[];bI=bH.$0[0].nextSibling;while(bI!==bH.$0[1]){bK.push(bI);bI=bI.nextSibling;}return{$:0,$0:bK};}else return{$:0,$0:n.init(bG.childNodes.length,(bJ=bG.childNodes,function(bL){return bJ[bL];}))};};bj.Except=function(bG,bH){var bI;bI=bG.$0;return{$:0,$0:n.filter(function(bJ){return n.forall(function(bK){return!(bJ===bK);},bI);},bH.$0)};};bj.Iter=function(bG,bH){n.iter(bG,bH.$0);};bj.DocChildren=function(bG){var bH;function bI(bJ){if(bJ!=null&&bJ.$==2)bI(bJ.$0.Current);else if(bJ!=null&&bJ.$==1)bH.push(bJ.$0.El);else if(bJ==null);else if(bJ!=null&&bJ.$==5)bH.push(bJ.$0);else if(bJ!=null&&bJ.$==4)bH.push(bJ.$0.Text);else if(bJ!=null&&bJ.$==6)n.iter(function(bK){if(bK==null||bK.constructor===g)bI(bK);else bH.push(bK);},bJ.$0.Els);else{bI(bJ.$0);bI(bJ.$1);}}bH=[];bI(bG.Children);return{$:0,$0:C.ofSeqNonCopying(bH)};};bk.Clear=function(bG){bG.splice(0,n.length(bG));};bm=e.OperationCanceledException=bC.Class({},bl,bm);bm.New=bC.Ctor(function(bG){bm.New$1.call(this,"The operation was canceled.",null,bG);},bm);bm.New$1=bC.Ctor(function(bG,bH,bI){this.message=bG;this.inner=bH;g.setPrototypeOf(this,bm.prototype);this.ct=bI;},bm);bn.Create=function(bG){return bq.New(false,bG,bn.forceLazy);};bn.forceLazy=function(){var bG;bG=this.v();this.c=true;this.v=bG;this.f=bn.cachedLazy;return bG;};bn.cachedLazy=function(){return this.v;};bo.$cctor=function(){bo.$cctor=a.ignore;bo.Empty={$:0};};bq.New=function(bG,bH,bI){return{c:bG,v:bH,f:bI};};bC.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
